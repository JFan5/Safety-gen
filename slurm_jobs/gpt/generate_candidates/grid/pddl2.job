#!/bin/bash

#SBATCH --mail-user=jfan5@nd.edu
#SBATCH --mail-type=BEGIN,END,FAIL
#SBATCH --partition=gpu
#SBATCH --gres=gpu:1
#SBATCH --output=job_outputs/generate_candidates_grid_pddl2_gpt.o
#SBATCH --cpus-per-task=28
#SBATCH --job-name=generate_candidates_grid_pddl2_gpt

conda activate llmstl

MODEL_PATH="sft_model/gpt_oss_20b/grid/pddl2"
DOMAIN_FILE="grid/domain.pddl"
PROBLEMS_DIR="grid/all_problems"
PROMPT_TEMPLATE="prompt_pddl2.txt"
OUTPUT_PATH="data/dpo/gpt_oss_20b/grid/pddl2/scored.jsonl"

python3 script/generate_score_candidate.py \
  --model "$MODEL_PATH" \
  --family auto \
  --domain-file "$DOMAIN_FILE" \
  --problems-dir "$PROBLEMS_DIR" \
  --prompt-template "$PROMPT_TEMPLATE" \
  --out "$OUTPUT_PATH"
