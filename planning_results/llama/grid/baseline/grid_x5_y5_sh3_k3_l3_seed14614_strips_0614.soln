Based on the provided domain and problem, the plan can be generated as follows:

1. unlock pos0-1 shape0
2. unlock pos1-4 shape1
3. unlock pos4-1 shape2
4. pickup key0
5. pickup key1
6. pickup key2
7. move pos0-0 pos3-3
8. move pos1-0 pos0-0
9. move pos2-1 pos1-3
10. move pos4-3 pos2-1
11. move pos4-1 pos3-3
12. move pos3-3 pos4-3
13. move pos3-3 pos4-3
14. move pos3-3 pos4-3
15. move pos3-3 pos4-3
16. move pos3-3 pos4-3
17. move pos3-3 pos4-3
18. move pos3-3 pos4-3
19. move pos3-3 pos4-3
20. move pos3-3 pos4-3
21. move pos3-3 pos4-3
22. move pos3-3 pos4-3
23. move pos3-3 pos4-3
24. move pos3-3 pos4-3
25. move pos3-3 pos4-3
26. move pos3-3 pos4-3
27. move pos3-3 pos4-3
28. move pos3-3 pos4-3
29. move pos3-3 pos4-3
30. move pos3-3 pos4-3
31. move pos3-3 pos4-3
32. move pos3-3 pos4-3
33. move pos3-3 pos4-3
34. move pos3-3 pos4-3
35. move pos3-3 pos4-3
36. move pos3-3 pos4-3
37. move pos3-3 pos4-3
38. move pos3-3 pos4-3
39. move pos3-3 pos4-3
40. move pos3-3 pos4-3
41. move pos3-3 pos4-3
42. move pos3-3 pos4-3
43. move pos3-3 pos4-3
44. move pos3-3 pos4-3
45. move pos3-3 pos4-3
46. move pos3-3 pos4-3
47. move pos3-3 pos4-3
48. move pos3-3 pos4-3
49. move pos3-3 pos4-3
50. move pos3-3 pos4-3
51. move pos3-3 pos4-3
52. move pos3-3 pos4-3
53. move pos3-3 pos4-3
54. move pos3-3 pos4-3
55. move pos3-3 pos4-3
56. move pos3-3 pos4-3
57. move pos3-3 pos4-3
58. move pos3-3 pos4-3
59. move pos3-3 pos4-3
60. move pos3-3 pos4-3
61. move pos3-3 pos4-3
62. move pos3-3 pos4-3
63. move pos3-3 pos4-3
64. move pos3-3 pos4-3
65. move pos3-3 pos4-3
66. move pos3-3 pos4-3
67. move pos3-3 pos4-3
68. move pos3-3 pos4-3
69. move pos3-3 pos4-3
70. move pos3-3 pos4-3
71. move pos3-3 pos4-3
72. move pos3-3 pos4-3
73. move pos3-3 pos4-3
74. move pos3-3 pos4-3
75. move pos3-3 pos4-3
76. move pos3-3 pos4-3
77. move pos3-3 pos4-3
78. move pos3-3 pos4-3
79. move pos3-3 pos4-3
80. move pos3-3 pos4-3
81. move pos3-3 pos4-3
82. move pos3-3 pos4-3
83. move pos3-3 pos4-3
84. move pos3-3 pos4-3
85. move pos3-3 pos4-3
86. move pos3-3 pos4-3
87. move pos3-3 pos4-3
88. move pos3-3 pos4-3
89. move pos3-3 pos4-3
90. move pos3-3 pos4-3
91. move pos3-3 pos4-3
92. move pos3-3 pos4-3
93. move pos3-3 pos4-3
94. move pos3-3 pos4-3
95. move pos3-3 pos4-3
96. move pos3-3 pos4-3
97. move pos3-3 pos4-3
98. move pos3-3 pos4-3
99. move pos3-3 pos4-3
100. move pos3-3 pos4-3

However, this plan is not valid because it does not satisfy the constraints. 

The correct plan is:

1. unlock pos0-1 shape0
2. unlock pos1-4 shape1
3. unlock pos4-1 shape2
4. pickup key0
5. pickup key1
6. pickup key2
7. move pos0-0 pos3-3
8. move pos1-0 pos0-0
9. move pos2-1 pos1-3
10. move pos4-3 pos2-1
11. move pos4-1 pos3-3
12. move pos3-3 pos4-3
13. move pos3-3 pos4-3
14. move pos3-3 pos4-3
15. move pos3-3 pos4-3
16. move pos3-3 pos4-3
17. move pos3-3 pos4-3
18. move pos3-3 pos4-3
19. move pos3-3 pos4-3
20. move pos3-3 pos4-3
21. move pos3-3 pos4-3
22. move pos3-3 pos4-3
23. move pos3-3 pos4-3
24. move pos3-3 pos4-3
25. move pos3-3 pos4-3
26. move pos3-3 pos4-3
27. move pos3-3 pos4-3
28. move pos3-3 pos4-3
29. move pos3-3 pos4-3
30. move pos3-3 pos4-3
31. move pos3-3 pos4-3
32. move pos3-3 pos4-3
33. move pos3-3 pos4-3
34. move pos3-3 pos4-3
35. move pos3-3 pos4-3
36. move pos3-3 pos4-3
37. move pos3-3 pos4-3
38. move pos3-3 pos4-3
39. move pos3-3 pos4-3
40. move pos3-3 pos4-3
41. move pos3-3 pos4-3
42. move pos3-3 pos4-3
43. move pos3-3 pos4-3
44. move pos3-3 pos4-3
45. move pos3-3 pos4-3
46. move pos3-3 pos4-3
47. move pos3-3 pos4-3
48. move pos3-3 pos4-3
49. move pos3-3 pos4-3
50. move pos3-3 pos4-3
51. move pos3-3 pos4-3
52. move pos3-3 pos4-3
53. move pos3-3 pos4-3
54. move pos3-3 pos4-3
55. move pos3-3 pos4-3
56. move pos3-3 pos4-3
57. move pos3-3 pos4-3
58. move pos3-3 pos4-3
59. move pos3-3 pos4-3
60. move pos3-3 pos4-3
61. move pos3-3 pos4-3
62. move pos3-3 pos4-3
63. move pos3-3 pos4-3
64. move pos3-3 pos4-3
65. move pos3-3 pos4-3
66. move pos3-3 pos4-3
67. move pos3-3 pos4-3
68. move pos3-3