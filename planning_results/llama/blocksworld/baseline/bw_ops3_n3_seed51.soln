Here is the plan that satisfies the given problem and constraints:

(pick b1 b2)
(stack b2 b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(stack b1 b2)
(drop b1)
(pick b1 b2)
(drop b2)
(pick b2 b3)
(stack b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b1 b2)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(unstack b1 b3)
(stack b3 b1)
(drop b3)
(pick b3 b1)
(drop b3)
(pick b3 b1)
(stack b1 b3)
(drop b1)
(pick b1 b2)
(pick b2 b3)
(drop b2)
(pick b2 b